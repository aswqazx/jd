/*
活动名称：积分换话费
入口：首页-话费充值

cron: 56 7,19 * * * jd_dwapp.js

*/

const $ = new Env('积分换话费');
var iｉl='jsjiami.com.v7';const ii1l1=iii1II;(function(lliiiI,lilil,ll1ll,Illl11,ii1lI,I1ilIl,I11iII){return lliiiI=lliiiI>>0x2,I1ilIl='hs',I11iII='hs',function(I1ilIi,IiiiI,llIlli,llIlll,lliii1){const l1iil=iii1II;llIlll='tfi',I1ilIl=llIlll+I1ilIl,lliii1='up',I11iII+=lliii1,I1ilIl=llIlli(I1ilIl),I11iII=llIlli(I11iII),llIlli=0x0;const Iiii1=I1ilIi();while(!![]&&--Illl11+IiiiI){try{llIlll=-parseInt(l1iil(0x112,'Rp&e'))/0x1*(-parseInt(l1iil(0x1c8,'TGDo'))/0x2)+-parseInt(l1iil(0x126,'3)0B'))/0x3+-parseInt(l1iil(0x1d7,'mrsI'))/0x4+-parseInt(l1iil(0xef,'1Jd&'))/0x5*(parseInt(l1iil(0xfd,'wBkH'))/0x6)+-parseInt(l1iil(0x1b0,'3)0B'))/0x7*(-parseInt(l1iil(0x15c,'sY^Y'))/0x8)+-parseInt(l1iil(0x12b,'l*[m'))/0x9*(-parseInt(l1iil(0xfe,'1Qve'))/0xa)+parseInt(l1iil(0x15f,'3)0B'))/0xb*(parseInt(l1iil(0xf9,'u(bf'))/0xc);}catch(lIIili){llIlll=llIlli;}finally{lliii1=Iiii1[I1ilIl]();if(lliiiI<=Illl11)llIlli?ii1lI?llIlll=lliii1:ii1lI=lliii1:llIlli=lliii1;else{if(llIlli==ii1lI['replace'](/[uJFqXVDSIBfUWlAepMtOK=]/g,'')){if(llIlll===IiiiI){Iiii1['un'+I1ilIl](lliii1);break;}Iiii1[I11iII](lliii1);}}}}}(ll1ll,lilil,function(IiiIil,IiiIii,IIlll,liliI,ll1lI,l1iii,IIlli){return IiiIii='\x73\x70\x6c\x69\x74',IiiIil=arguments[0x0],IiiIil=IiiIil[IiiIii](''),IIlll=`\x72\x65\x76\x65\x72\x73\x65`,IiiIil=IiiIil[IIlll]('\x76'),liliI=`\x6a\x6f\x69\x6e`,(0x16b850,IiiIil[liliI](''));});}(0x31c,0x7a4fb,Iii11l,0xc9),Iii11l)&&(iｉl=0xc9);function iii1II(_0x4e54a9,_0x10f006){const _0x5213a0=Iii11l();return iii1II=function(_0x4ae018,_0x4590df){_0x4ae018=_0x4ae018-0xea;let _0x112cf7=_0x5213a0[_0x4ae018];if(iii1II['XTPExq']===undefined){var _0x5b0caf=function(_0x2a37bc){const _0x501427='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1c4da3='',_0x391dfd='';for(let _0x33967c=0x0,_0x4442d3,_0x1c1a7f,_0x4650a6=0x0;_0x1c1a7f=_0x2a37bc['charAt'](_0x4650a6++);~_0x1c1a7f&&(_0x4442d3=_0x33967c%0x4?_0x4442d3*0x40+_0x1c1a7f:_0x1c1a7f,_0x33967c++%0x4)?_0x1c4da3+=String['fromCharCode'](0xff&_0x4442d3>>(-0x2*_0x33967c&0x6)):0x0){_0x1c1a7f=_0x501427['indexOf'](_0x1c1a7f);}for(let _0x5a437b=0x0,_0x264285=_0x1c4da3['length'];_0x5a437b<_0x264285;_0x5a437b++){_0x391dfd+='%'+('00'+_0x1c4da3['charCodeAt'](_0x5a437b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x391dfd);};const _0x3a6cd0=function(_0x40dfb8,_0x4ae751){let _0x1e5a41=[],_0x2d8622=0x0,_0x581ca2,_0x1dfdb4='';_0x40dfb8=_0x5b0caf(_0x40dfb8);let _0x164f25;for(_0x164f25=0x0;_0x164f25<0x100;_0x164f25++){_0x1e5a41[_0x164f25]=_0x164f25;}for(_0x164f25=0x0;_0x164f25<0x100;_0x164f25++){_0x2d8622=(_0x2d8622+_0x1e5a41[_0x164f25]+_0x4ae751['charCodeAt'](_0x164f25%_0x4ae751['length']))%0x100,_0x581ca2=_0x1e5a41[_0x164f25],_0x1e5a41[_0x164f25]=_0x1e5a41[_0x2d8622],_0x1e5a41[_0x2d8622]=_0x581ca2;}_0x164f25=0x0,_0x2d8622=0x0;for(let _0x4f08e7=0x0;_0x4f08e7<_0x40dfb8['length'];_0x4f08e7++){_0x164f25=(_0x164f25+0x1)%0x100,_0x2d8622=(_0x2d8622+_0x1e5a41[_0x164f25])%0x100,_0x581ca2=_0x1e5a41[_0x164f25],_0x1e5a41[_0x164f25]=_0x1e5a41[_0x2d8622],_0x1e5a41[_0x2d8622]=_0x581ca2,_0x1dfdb4+=String['fromCharCode'](_0x40dfb8['charCodeAt'](_0x4f08e7)^_0x1e5a41[(_0x1e5a41[_0x164f25]+_0x1e5a41[_0x2d8622])%0x100]);}return _0x1dfdb4;};iii1II['dcJknn']=_0x3a6cd0,_0x4e54a9=arguments,iii1II['XTPExq']=!![];}const _0x2f250c=_0x5213a0[0x0],_0x44f3bd=_0x4ae018+_0x2f250c,_0x4eb5d5=_0x4e54a9[_0x44f3bd];return!_0x4eb5d5?(iii1II['yOjaDR']===undefined&&(iii1II['yOjaDR']=!![]),_0x112cf7=iii1II['dcJknn'](_0x112cf7,_0x4590df),_0x4e54a9[_0x44f3bd]=_0x112cf7):_0x112cf7=_0x4eb5d5,_0x112cf7;},iii1II(_0x4e54a9,_0x10f006);}function Iii11l(){const l1l11i=(function(){return[...[iｉl,'pDFjXfsJUMjWSiVUKameiABD.qtcoml.vI7AIOue==','B28qW4v5WOhcU8kj','WR3dSSkfqG','WQeDW6u','WRy9u8kUWOu','EgFdHqeN','W4/cRNG','W4ToWRfFjtmwWRhdUmojW6G','wmk4W6ZcMvK','FSkwW4pcG2u','WQBOR4dMSQtLPyJOTQqi4P++p+AwJUwqS+w5UoAuNUAmMW','W73dQCkMWOS','W7q2W5Lf','WQxdUM7cO3BcIa','WPGwx8k+','W4r2WRFdRSobimkXW4Dge193xdddNaNcImkylmkoWPFcNmkDWR7dHYrpxCkli8o7DaeAW5D2W6ZdTCkeW6hcSmoqWQ0','imoAW7VcQgbuy8k9WQC','WPvYfv7dPSo5','W4GMW7hdT2LhiM7cHx8','DLKqWPfP','W6tdOSk7','B8k2W7JdUbjLzeLRW6m','W4eBx8kBwrxdR8oQlSki','kSoAFG','WP7cNXPzgq','W4TNWRFdK8oxACoTWOLabG','5BY85yMJ5OgE56Aw5yQE77+M','W6TeWOe','W48+W4BdUW','sxpcK2m','yYldGCk5hW','WQpcGJ0qFa','WPFcHIz4W4a','WPlOR7VMSORLK5xLUBhcHq','p8kLW7C','W4uVymk7WQXpw8kNWPq','WRVdP8kcW6HEbg3cSK8','tctcJX0','WOpcRY9jW6ldTSkq','W6JdOCkSWPqIWOPGvSodFIZcS8kPgZNdRW','WQhdTSkzuSo5WPBcOG','WRxdTu7cPZZcI8oUW67cPSkx','WR/dVmkpySoUWPC','WQBcMcvLaG','W5rGWPldTmoG','WQ/cSJHP','WQpcNWhcSSk6','WOv9j8kwWPjkCSkc','smkWW5pcNa','cmoEsqKC','uGldOmkDpq','W4PRWRS','4P6XWP/MRPFOTB/LJyBMT57LIyxNGzBNIltVVOhKU63NUBtNURhMI4/OOP/KUB/LIje','W6BcVmkAW6vZdgVcV1/cHa','WPz6WRqk','WOVcSSob','W7NdMKTYaq','WOxdL8of','yZj8valdUaK','W6dcSc7dUMRdLmkFW5BcHmk7W49DW7W','W65dWPijW7isttakWONcJr4fW5a9DbtdIWz9WR5VWPhcI8oHyWTkW4JcRSkSWORcKtlcPSkLaXBcIa','W7enmsZcIcG5W7DyWRad','W4vfWPNdP8oa','W5TJWQRdQG','qSk6aSoxys7cJSk6WOS','WO7dI8kbmmoFWOlcHfTl','AUw3OUE6SEMJQUwmSEs7LowkPW','xNBcMG','WR/cSJ9Jo0ddHSkGgmo6oG','8jMPTgO','8yYlMCkI','W7vVWP9PWOe','yJHO','6lEt5y+I5PsW5PsN','p24+hLRcQ1HOWRBcRb0+WR4','W6tdPCkEWR86','WOzPlKS','WQFcRa7cVmkdEZdcJG','WRFdPmk7tSo7WOVcN8ktAJ4','WQdcTIL4zetdICkSb8oP','B8kGW5/dSa','AhOrW4D7WO/cOCkBhW','z8kKW4xdTGfJ','nmolW6FcLe8','4P6Wv+IeSEAFS+I8KEIHJEMbJEwkMEs4HUMwO+IUGsy','CuxdUYe','DMSqW510WO/cRq','4P++loAFOUIdPEAUHUEJI+wLGoEqLK0','y8o9W5ldMCoQ','W480mtxcOW','z0OOcCkx','WPNdMCo/','BoMHIowoPUs5HEwkRUAjMEwjUa'],...(function(){return[...['WQVdU8krW69EbMJcH1NcLmoPAHC','772E5lIC5AA5','BSopW4ddLSon','WQtdVmkx','tZlcMc8V','WPNcQZvo','Fsn9tG3dUaveWQm','Bmk+iXy','W41XWRddT8ovDa','EIRdUSkF','Du/dQXa6W6RdLq','W5ZcTgvXlmouW7JcOW','W55JWQ3dUSoDDW','WRddVmkmqG','8kUOHCkP','g08weSoQWPLMBSkqWRK','WR3cPb7cVmk/FZ7cHa1K','zIRdUCkEm8of','W4/dMmkRWP8Q','W68+W4ZdQMThhY3cT2NdUSkG','BfusWO4','WOWQW6aCjCo+W49AcSkGW43dKCkKWRuCq8kikmkHWQlcNGNcJmoPrqpdJW','WR/cOJ7cLCkb','WOFdNSoQcCkuW5pdRSoBdq','WOXOlKVdTW','WP3dOmkvW7n+aMNcSq','xbSbe8oPWPHvqW','WQRdISk4dCoR','WO1VjLFdUW','WQqCW6BdNxW','gSkmx2ZdNmoPpgpcVmoR','WO4wrCk7WQ5S','WO99W70mWQ0','WPNcIJ7cGW','WRNdTMNcVIJdN8kiWQ/cOCkiW6aYW5VcM8oWFKdcM8ocnG3dHaxcKCkHWQ3dML8FWP4CFmkmv8o/vSkgsWzxWQ/cJ8oRWQiFWPVcMdOarCocW4XcW7OlW5lcVSkDhCobWRm','8l66Nmog','WRpdONz/W6ZdSqxcNSkMWP8','xCkCo8o5xW','44gL5OY156EY44k/6k6a5yAp6i+Q5y+QWRtcPmookN3cSq','WRddOCkrv8oOWORdU8kxFW','W49jWRPDjvasWPpdGCo1W70z','cmo3rSkjpYBcRCkQWRKEW7C','hfSggSo9WO92','W515WRXEWONdHcm','WODPjuldQSo2fa','aKSwcSo5WPTG','amkkxq','CvmEWOHv','xJ9wqJm','x3CuW49w','CfZcJHSB','rY59uCk3W79dWOqJWOHooq','W6qOW4pdKKi','W5vUWOxdU8oM','u2CTbCkaqu8pWQRcSq','WPXVmW','qYnDCmk1','v8kNhmokAJS','W48dW7m6zduI','jSo6W6FcTv8','nmk/W6G','W4xdKSoOmSkjW6pdOq','W4DcWRvFjW0oWRhdGSoYW5S','W6jaWRuqW6zgk3eiWPe','kCowW4VcQwe','WOPZpMJdO8o2hq','W78/W7PfW6NdSmkv5B2T5AsU44g95lQQ5lQd6lEF5y2y','WRZdP27cVtRcGSoc','4P+9WQlMNitNN73ORQFMSAddMq','zCkWW4hdIcy','WQzPjMNdOq','W55JWQ8','WPSjW7ehzq','WO7cTmoDjq','WOlcPtS','WO3cHdNcLSkAwXhcPZPuWPmvCHXQWPtcTmo5aComWO3dKSkwW7nk','sJhcLGGPW7vGW65DW5Disr0BFSorvIJdK8oEW7vIWRL4W6NdPHVdVCoTjemyw17dTSoPemkuxmo0yYlcPgxdTCkpW5O5WOH4W4vXWRm0WOTuW5FcNCkEW69NjmkhEvpcUmoFW4a9WQSbc8ofW4C','a0ec','WPaSWRnCW7RdOSozc8kgdZtdU8onWPFdN8olWPnMWRiFd0hdRCkUW5NdU3NcOWPjsSk5','WPqssSk7WQrZEq','wMmz','W4mPy8onW4Sxmmk5WRavWPlcHJ8','W6C2W4rq','WQ/cRapcTSkHDIq','BmoTW4xdKa','hCkoCMldVq','WPLIWPpdKgf8b2lcLG','WR3dRxO','uSkHfmoB','WQNcMSoTavXqWOFdRmk6n8kjzmkLWQxcR2G+WO58W4u','zKmSWOjwWPT1lComW6q','ACo/W4ldMmoBWRO','uZjOv8kbW69F','W4HJWRFdVW'],...(function(){return['D2ee','DWnouCkj','aSkmwxddGCo8mhi','qhFcLhfjW7e1','W65vWO0kW5C','ECk0W4xdLbTV','WPHMWRC','W4xdO11ZpeVcIMW','WOyXW5qQrW','aL0c','W61sWP8k','W53dRuK','vSkRbmoYyc7cJSkYWQeRW6hdOHhdNW','xmkRa8onBI7cGG','W4a+W4u','W4xcQgC','W6DeWPuqW6zg','qghcGa','WQ7dUSki','AmkGW5/dSH0','56625yQJ5OUG5yIE77YQ6i+u5B6t','wbznAdy','WPvfcG','W5NdRvO','yColW6VdImoo','WPhcGsWzxG','WP1XWPWnWRK','E8oLW5BdN8oYWQfc','W7jzWRa8W5u','l8oSFItcTteKW7Ol','aCkeWRVdHqxcOJ5tWOxcRW','WPVdSJCZASkjWQ7cGSk3ihLVWRq','WRxdUSkq','4P+GiUAFQEEDU+ITHEAXMmk+','oaxcTq','imkxW5FdMmkL','WP1ZmW','DN0e','WPrphSorvXJdKG','W7xcVcyJW7hdTqRcVW','WRVcSapcKSkJFG','WOC5W7OVW5FdTbzMhmkdxq','W45QW7i','WPlcUraK','W4KTzSoeWPfjwCk4WP8Q','WOLMp8kVWOK','W7CnlcpcLsa','WONdKmkhomoDWQVcMfa','WP/cJda2','B2eWW5PNWOhcPSkA','nCoiDWeeWPe','W6iYW5Xrx2BdOa','W4fQW7en','gchdLKXhW4m8zW8','F8kOgqVcGdm3W4uKWRu','4P6IW6RMRlJOTjZLJBtMTQRLIz3NGjhNIQRVVjJKURZNUPdNUztMIlxOOABKUOFLIjy','D2arWP9G','W5eqW5rpvW','WRZdVmkeW6bClxhcUq','WQ40W5a8','W5tNPB7LI5RPOB7LJP3LP5JOTkq','vh8qcSkosa','w38z','WRJdTSkxW4Hb','WRNdP3ZcQJ7cL8ou','vNJcIr0','y13dKWma','emobW6FcTwTDFSo2WOPFW5qm','W77cVCoaWQ8a','B0Cy','pSk5W7C','WOdcVSokm2P2WQ4','z8kUW4W','4P6PjUADOoIdK+AVRoEJUEwLVUEtM8kM','WRdORQdMS6/LPjxOTj814PYiW5O','W5ldSeT5jeC','h8krshldOCo6nhhcSa','W6eBiZFcIMmWW7yFWQujuW','WOXzcmoqrrBdKmok','WPhdKmku','WRFdP3H4WORcQtRcHmkCWPnJW7K','WPxdKmkh','56wE5yQe5Aw45yQP5OMa5yQ9','W57OROZMS4hLPzNOTljc4P+yW6FMLANLKB7LUlJMLjVMJly','jmopW6dcTq','gSkj5lUI5yUe5BAz5A2W5OMU','W4pdTmomngj9WRJcJ8kTbSk0vmkAWPpcOL0jWOruW6BdNZ0Z','W4DyWQzSWRq','qSoIW6tdImo0','WRZdSxO','WP1lgCod'];}())];}())];}());Iii11l=function(){return l1l11i;};return Iii11l();};const jdCookie=require(ii1l1(0x1c2,'uU!y')),notify=require(ii1l1(0xea,'AzZi')),common=require(ii1l1(0x189,'%1Rt')),cryptoJS=require(ii1l1(0xfc,'c)qO')),isNotify=![];let cookie='';const cookiesArr=Object[ii1l1(0x13d,'[O5V')](jdCookie)['map'](i1IIl=>jdCookie[i1IIl])[ii1l1(0x10e,'1Qve')](I1lll1=>I1lll1);!cookiesArr[0x0]&&($[ii1l1(0x1a4,'Gtf1')]($[ii1l1(0x1f3,'4*5Q')],ii1l1(0xfb,'is7)')),process['exit'](0x1));!(async()=>{const lIIill=ii1l1,i1IIi={'Wqmct':function(IIII1I,Iii111){return IIII1I+Iii111;},'jZlew':lIIill(0x19e,'5oC('),'PhYeP':function(l1l1II){return l1l1II();}};notify[lIIill(0x170,'pMve')]({'title':$['name']});for(let Iil1I1=0x0;Iil1I1<cookiesArr[lIIill(0x1df,'dAuw')];Iil1I1++){$[lIIill(0xf2,'3IEV')]=i1IIi['Wqmct'](Iil1I1,0x1),cookie=cookiesArr[Iil1I1],common['setCookie'](cookie),$['UserName']=decodeURIComponent(common['getCookieValue'](cookie,i1IIi[lIIill(0x1bb,'WNri')])),$[lIIill(0x140,'1Qve')]=notify[lIIill(0x17e,'F8nv')]($[lIIill(0xed,'5oC(')],$['UserName']),$[lIIill(0x135,'Ui1g')]='',console[lIIill(0x103,'Ui1g')](lIIill(0x117,'(H@b')+$['index']+'】'+($[lIIill(0x1da,'WNri')]||$['UserName'])+'******\x0a'),$['UA']=common[lIIill(0x1e0,'#iCF')]($[lIIill(0xee,'uU!y')]),await i1IIi[lIIill(0x105,'mrsI')](Main),common['unsetCookie']();if($['runEnd'])break;await $[lIIill(0x1f1,'#rnC')](0x3e8);}isNotify&&notify[lIIill(0x1a6,'qr]0')]()&&await notify['push']();})()[ii1l1(0x146,'dAuw')](Ii1iII=>$[ii1l1(0x1b7,'c)qO')](Ii1iII))[ii1l1(0x128,'WNri')](()=>$[ii1l1(0x15e,'kJLQ')]());async function Main(){const I11iIi=ii1l1,l1i11I={'giVqQ':function(Ii1iI1,lilIli){return Ii1iI1===lilIli;},'VABOU':I11iIi(0x101,'5oC('),'xzkRw':function(Iliili,Iliill){return Iliili(Iliill);},'DywaC':I11iIi(0x1db,'c)qO'),'LXPVC':function(IIII11,i1illi,i1illl){return IIII11(i1illi,i1illl);},'zYibr':function(I1llil,I1llii){return I1llil*I1llii;},'GkCiR':I11iIi(0x1f5,'xyGP'),'PZVep':function(lilIll,l1i111,iliII1){return lilIll(l1i111,iliII1);},'OwPlw':function(II11I1,Iii11I){return II11I1+Iii11I;},'etNMt':I11iIi(0x13a,'F8nv'),'jlhNU':function(Iil1II,iIIl1I){return Iil1II==iIIl1I;},'JnUyH':function(I1iIli,lI1Ill){return I1iIli(lI1Ill);},'hdLbz':I11iIi(0x1f9,'1Jd&'),'hilyt':function(lI1Ili,IliilI){return lI1Ili*IliilI;},'RocwG':function(i1II1,iIIl11){return i1II1(iIIl11);},'yLzBC':'taskreceive','MseZi':function(l1l1I1,I1iIll){return l1l1I1(I1iIll);},'xGZxf':function(I1lliI,llIllI,I1ilI1){return I1lliI(llIllI,I1ilI1);},'ColGn':function(iillll,lIIilI){return iillll*lIIilI;}},II11II=await common[I11iIi(0x13f,'1Qve')](cookie);if(!II11II&&l1i11I[I11iIi(0x195,'@TBm')](typeof II11II,l1i11I[I11iIi(0x148,'mrsI')])){console[I11iIi(0x171,'pMve')](I11iIi(0x1d6,'(H@b'));return;}try{$[I11iIi(0x14a,'F8nv')]=![],$[I11iIi(0x19f,'l*[m')]=null,await l1i11I[I11iIi(0x160,'3)0B')](sendRequest,l1i11I[I11iIi(0x106,'sKBc')]);if($[I11iIi(0x12f,'7^$c')]){let II1li1=$[I11iIi(0x1b6,'TGDo')][I11iIi(0x15a,'u(bf')]['signStatus']||0x0;console[I11iIi(0x1ed,'uU!y')](I11iIi(0x1a7,'1Jd&')+$[I11iIi(0x114,'[O5V')][I11iIi(0x162,'x@Am')]+I11iIi(0x1eb,'kues')+(II1li1?'已':'未')+'签到');!II1li1&&(await $['wait'](l1i11I['LXPVC'](parseInt,l1i11I['zYibr'](Math[I11iIi(0x1f6,'qr]0')](),0x7d0)+0x3e8,0xa)),await sendRequest(l1i11I['GkCiR']),await $['wait'](l1i11I[I11iIi(0x1e7,'pMve')](parseInt,l1i11I[I11iIi(0x1be,'Gtf1')](l1i11I['zYibr'](Math[I11iIi(0x161,'8MXC')](),0xfa0),0x3e8),0xa)));if(!$['hot']){$['tasklist']=[],await $[I11iIi(0x187,'#iCF')](parseInt(l1i11I[I11iIi(0x1be,'Gtf1')](l1i11I['zYibr'](Math[I11iIi(0xf4,'ehAE')](),0x7d0),0xc80),0xa)),await l1i11I['xzkRw'](sendRequest,l1i11I['etNMt']);if($['tasklist'])for(let l1lIlI of $[I11iIi(0x18e,'sKBc')]){$['i']=l1lIlI;if(l1i11I[I11iIi(0x14c,'BDbB')](l1lIlI['viewStatus'],0x0))$['id']=l1lIlI['id'],await l1i11I[I11iIi(0x18b,'seJ8')](tasksendRequest,l1i11I[I11iIi(0x14d,'(H@b')]),await $[I11iIi(0x1cc,'qr]0')](parseInt(l1i11I[I11iIi(0xf1,'5oC(')](Math[I11iIi(0x165,'Gtf1')](),0x7d0)+0x898,0xa)),await l1i11I['RocwG'](tasksendRequest,l1i11I['yLzBC']);else{if(l1lIlI[I11iIi(0xf3,'Ui1g')]==0x2)$['id']=l1lIlI['id'],await l1i11I['MseZi'](tasksendRequest,l1i11I[I11iIi(0x1ad,'7B!B')]),await $[I11iIi(0x1ef,'7B!B')](l1i11I['xGZxf'](parseInt,l1i11I[I11iIi(0x11b,'5oC(')](Math[I11iIi(0x1fb,'4*5Q')](),0x7d0)+0x898,0xa));else l1i11I['jlhNU'](l1lIlI['viewStatus'],0x1)&&console[I11iIi(0x149,'nymY')]('['+l1lIlI[I11iIi(0x18f,'c)qO')]+I11iIi(0x188,'Gtf1'));}}}}await $[I11iIi(0x1bd,'@TBm')](0x3e8);}catch(IiiIl1){console[I11iIi(0x12c,'TGDo')](I11iIi(0x1e1,'ehAE')+IiiIl1);}}async function handleResponse(lIIil1,IIli1){const I1ilII=ii1l1,II1liI={'ahEsf':I1ilII(0x10b,'pMve'),'uTntQ':function(IlI1i1,l1lIl1){return IlI1i1===l1lIl1;},'WuKTZ':I1ilII(0x16a,'7B!B'),'fCqgq':'usersign','ZNOgP':function(IiiIlI,Iilli1){return IiiIlI===Iilli1;},'jLUpM':function(I1l1Il,llIll1){return I1l1Il===llIll1;},'GcWqd':'tasklist'};try{switch(lIIil1){case II1liI['ahEsf']:if(II1liI['uTntQ'](IIli1['code'],0xc8))$[I1ilII(0x169,'#rnC')]=IIli1[I1ilII(0x18d,'nymY')];else{if(II1liI[I1ilII(0x16b,'7^$c')](IIli1[I1ilII(0x1a9,'l*[m')],0x1c3))$['hot']=!![],console[I1ilII(0x141,'l*[m')](II1liI[I1ilII(0xf0,'x@Am')]);else{if(II1liI[I1ilII(0x18a,'sY^Y')](IIli1['code'],0x12e))console[I1ilII(0x133,'sKBc')](IIli1[I1ilII(0x139,'(H@b')]);else IIli1['msg']?(console[I1ilII(0x122,'1Jd&')](''+IIli1[I1ilII(0x178,'7^$c')]),$[I1ilII(0x17a,'%1Rt')][I1ilII(0x153,'c)qO')](IIli1['msg'])):console[I1ilII(0x1ed,'uU!y')]('❓'+lIIil1+'\x20'+JSON[I1ilII(0x1f0,'mrsI')](IIli1));}}break;case II1liI[I1ilII(0x1ec,'seJ8')]:if(II1liI['ZNOgP'](IIli1[I1ilII(0x1c3,'(H@b')],0xc8))console['log'](I1ilII(0x147,'uU!y')+IIli1[I1ilII(0x199,')pB4')]['signInfo'][I1ilII(0x14e,'seJ8')]+'积分，总积分：'+IIli1[I1ilII(0x174,'LjlA')][I1ilII(0x16d,'uU!y')]);else{if(II1liI['uTntQ'](IIli1['code'],0x1c3))$[I1ilII(0x184,'x@Am')]=!![],console[I1ilII(0x157,'3)0B')](I1ilII(0x1c1,'x@Am'));else{if(II1liI['jLUpM'](IIli1[I1ilII(0x11e,'%1Rt')],0x12e))console['log'](IIli1[I1ilII(0x139,'(H@b')]);else IIli1[I1ilII(0x1e8,'Rp&e')]?(console[I1ilII(0x142,'xyGP')](''+IIli1['msg']),$[I1ilII(0x1c7,'mrsI')][I1ilII(0x1c4,'%1Rt')](IIli1[I1ilII(0x13c,'1Jd&')])):console[I1ilII(0x17b,'dAuw')]('❓'+lIIil1+'\x20'+JSON[I1ilII(0x17f,'Ui1g')](IIli1));}}break;case II1liI[I1ilII(0x1d4,'sY^Y')]:if(II1liI[I1ilII(0x110,'#iCF')](IIli1[I1ilII(0x1d9,'5oC(')],0xc8))$[I1ilII(0x1bc,'3)0B')]=IIli1[I1ilII(0x163,'BDbB')];else{if(IIli1[I1ilII(0x12d,'1Qve')]===0x1c3)$['hot']=!![],console[I1ilII(0x182,'x@Am')](II1liI['WuKTZ']);else{if(IIli1[I1ilII(0x1e2,'wny3')]===0x12e)console[I1ilII(0x13e,'F8nv')](IIli1['msg']);else IIli1[I1ilII(0x1af,'kues')]?(console[I1ilII(0x190,'3IEV')](''+IIli1[I1ilII(0x18c,'TGDo')]),$[I1ilII(0x140,'1Qve')][I1ilII(0x1c0,'qr]0')](IIli1[I1ilII(0x158,'sKBc')])):console['log']('❓'+lIIil1+'\x20'+JSON['stringify'](IIli1));}}break;}}catch(Illl1l){console[I1ilII(0x11c,'sY^Y')](I1ilII(0x17c,'5oC(')+lIIil1+I1ilII(0x1ae,'sY^Y')+(Illl1l[I1ilII(0x159,'nymY')]||Illl1l));}}async function sendRequest(Illl1i){const I11iIl=ii1l1,lIIiil={'wfUwH':I11iIl(0xf6,'WNri'),'sgacd':I11iIl(0x1a2,'dAuw'),'mwzWu':function(IIlil){return IIlil();},'BEsgL':I11iIl(0xf7,'TGDo'),'FIwga':'h5-sep','hnBMM':I11iIl(0x120,'WNri'),'iGZyr':I11iIl(0x177,'uU!y'),'AGykm':I11iIl(0x181,'nymY'),'JJxqD':I11iIl(0x12e,'%1Rt'),'JXsrY':'tasklist','kBwmk':function(ilI1lI){return ilI1lI();},'xbQjR':I11iIl(0x198,'hg(K'),'jMZEt':I11iIl(0x19c,'qr]0'),'hLgzI':I11iIl(0x19a,'TGDo'),'mKimK':'dwapp_task_dwList','XoyGw':'*/*','HyaLL':'https://mypoint.jd.com','vgSBL':function(IiiIll,IIlii){return IiiIll===IIlii;},'WMwKD':'GET','cdVDQ':I11iIl(0x1fd,'l*[m'),'RMhFx':function(IlI1il,IilliI){return IlI1il>IilliI;},'HXejQ':function(IlI1ii,lIIiii){return IlI1ii>=lIIiii;}};if($[I11iIl(0x15b,'WNri')])return;let l1lIii='',I11iI1=null,l1lIil=null,IiiIli=lIIiil['wfUwH'];switch(Illl1i){case lIIiil[I11iIl(0x104,'7^$c')]:I11iI1=await lIIiil[I11iIl(0x1ee,'[AoK')](sign),l1lIii=lIIiil[I11iIl(0x107,'LjlA')],l1lIil={'appid':lIIiil[I11iIl(0x1bf,'4*5Q')],'functionId':lIIiil['hnBMM'],'body':JSON[I11iIl(0x1b1,'uU!y')](I11iI1),'client':'m','clientVersion':lIIiil[I11iIl(0x1cb,'qr]0')]};break;case lIIiil[I11iIl(0x16c,')pB4')]:I11iI1=await sign(),l1lIii='http://api.m.jd.com/api?functionId=DATAWALLET_USER_SIGN',l1lIil={'appid':lIIiil[I11iIl(0x1fc,'hg(K')],'functionId':lIIiil[I11iIl(0x191,'ehAE')],'body':JSON[I11iIl(0x19d,'#iCF')](I11iI1),'client':'m','clientVersion':lIIiil[I11iIl(0x14b,'seJ8')]};break;case lIIiil[I11iIl(0x1e6,'8MXC')]:I11iI1=await lIIiil['kBwmk'](sign),I11iI1[I11iIl(0x1ea,'uU!y')]=lIIiil[I11iIl(0x1b9,'qr]0')],l1lIii=lIIiil[I11iIl(0x192,'wny3')],l1lIil={'appid':lIIiil['hLgzI'],'functionId':lIIiil[I11iIl(0x1b8,'At*)')],'body':JSON[I11iIl(0x1cd,'1Qve')](I11iI1)};break;default:console[I11iIl(0x179,'kues')](I11iIl(0x154,'qr]0')+Illl1i);return;}const iillli={};I11iI1&&Object['assign'](I11iI1,iillli);l1lIil&&Object[I11iIl(0x143,'[O5V')](l1lIil,iillli);const I1l1Ii={'url':l1lIii,'method':IiiIli,'headers':{'Accept':lIIiil[I11iIl(0x1ac,'BDbB')],'Cookie':cookie,'Referer':'https://mypoint.jd.com/predeem/?sid=&un_area=4_50952_60426_0','Origin':lIIiil[I11iIl(0x109,'l*[m')],'User-Agent':$['UA']},'params':l1lIil,'data':I11iI1,'timeout':0x7530,'httpsTlsOptions':[lIIiil[I11iIl(0x196,'@TBm')]]['includes'](Illl1i)?common['useAppTls']():null};lIIiil[I11iIl(0xeb,'WNri')](IiiIli,lIIiil['WMwKD'])&&(delete I1l1Ii[I11iIl(0x1dd,'dAuw')],delete I1l1Ii[I11iIl(0x124,'ehAE')][lIIiil[I11iIl(0x10d,'1qm2')]]);const I1i11i=0x1;let I1i11l=0x0,llIlii=null,llIlil=![];while(I1i11l<I1i11i){lIIiil['RMhFx'](I1i11l,0x0)&&await $[I11iIl(0x127,')pB4')](0x3e8);const iI1lli=await common[I11iIl(0x1b5,'c)qO')](I1l1Ii);if(!iI1lli['success']){llIlii=I11iIl(0xf8,'[O5V')+Illl1i+'\x20请求失败\x20➜\x20'+iI1lli['error'],I1i11l++;continue;}if(!iI1lli[I11iIl(0x1aa,'VqRV')]){llIlii=I11iIl(0x1d3,'3IEV')+Illl1i+I11iIl(0x197,'[O5V'),I1i11l++;continue;}await handleResponse(Illl1i,iI1lli[I11iIl(0x132,'qr]0')]),llIlil=![];break;}lIIiil[I11iIl(0x1c5,'F8nv')](I1i11l,I1i11i)&&(console[I11iIl(0x11f,'7B!B')](llIlii),llIlil&&($[I11iIl(0x100,'sY^Y')]=!![],$[I11iIl(0x1b3,'7B!B')]&&$[I11iIl(0x136,'VqRV')][I11iIl(0x145,'uU!y')](llIlii)));}async function taskhandleResponse(ll1iI,iI1lll){const l1l11l=ii1l1,l1lIll={'tmozX':function(I1l1II,IIli1I){return I1l1II===IIli1I;},'wiVCC':l1l11l(0x1ca,'8MXC')};try{switch(ll1iI){case l1l11l(0x151,'is7)'):if(l1lIll[l1l11l(0x1a0,'7^$c')](iI1lll[l1l11l(0x167,'AzZi')],0xc8))iI1lll['data']['dwUserTask']?console[l1l11l(0x133,'sKBc')]('['+$['i'][l1l11l(0x1fe,'7^$c')]+l1l11l(0x1e9,'1Qve')):console[l1l11l(0x1d0,'LjlA')]('['+$['i'][l1l11l(0x1b2,'[AoK')]+l1l11l(0x1cf,'pMve'));else iI1lll[l1l11l(0x10c,'3)0B')]?(console['log'](''+iI1lll[l1l11l(0x144,'VqRV')]),$[l1l11l(0x102,'1Jd&')]['fix'](iI1lll[l1l11l(0x1a1,'hg(K')])):console['log']('❓'+ll1iI+'\x20'+JSON[l1l11l(0xec,'Rp&e')](iI1lll));break;case l1lIll[l1l11l(0x1ab,'4*5Q')]:if(iI1lll[l1l11l(0x1f7,'c)qO')]===0xc8)iI1lll[l1l11l(0x129,'seJ8')][l1l11l(0x131,'1qm2')]?console[l1l11l(0x1d5,'mrsI')]('['+$['i']['name']+']领取'+iI1lll[l1l11l(0x19b,'ehAE')][l1l11l(0x108,'1qm2')]+l1l11l(0x185,'F8nv')):console['log']('['+$['i']['name']+l1l11l(0x16f,'hg(K'));else iI1lll[l1l11l(0x125,'pMve')]?(console['log'](''+iI1lll[l1l11l(0x1a8,'[O5V')]),$[l1l11l(0x118,'TGDo')][l1l11l(0x193,'xyGP')](iI1lll[l1l11l(0x1a8,'[O5V')])):console['log']('❓'+ll1iI+'\x20'+JSON[l1l11l(0x1de,'sKBc')](iI1lll));break;}}catch(I1i11I){console['log'](l1l11l(0x1e4,'sY^Y')+ll1iI+'\x20请求响应\x20'+(I1i11I[l1l11l(0x1b3,'7B!B')]||I1i11I));}}async function tasksendRequest(llIliI){const IilIil=ii1l1,I1l1I1={'lRKGP':IilIil(0x1fa,'WNri'),'RtQXI':function(IIli1l,II1lii){return IIli1l(II1lii);},'qwLGS':function(lIIii1,ll1i1){return lIIii1+ll1i1;},'Jvsjd':IilIil(0x1c9,'[O5V'),'kqchV':IilIil(0x1d1,'At*)'),'qkHyr':function(IIli1i,I1iIi1){return IIli1i(I1iIi1);},'xJWBP':'https://dwapp.jd.com/user/task/dwReceive','rAGiP':'https://prodev.m.jd.com','pegIq':IilIil(0x1dc,'At*)'),'ylFeT':IilIil(0x121,'[AoK'),'WDEem':'gzip,\x20deflate,\x20br','zxBho':function(lliil1,IIllI){return lliil1===IIllI;},'ULVQP':'GET','hbksV':IilIil(0x176,'#iCF'),'nqjYS':function(lliilI,lili1){return lliilI>lili1;},'mtBGq':function(ll1l1,IllIIi){return ll1l1>=IllIIi;}};if($[IilIil(0x138,'dAuw')])return;let I1i111='',ilI1li=null,IIliI=null,ilI1ll=IilIil(0x16e,'wBkH');switch(llIliI){case I1l1I1[IilIil(0xfa,'1Qve')]:enc=await I1l1I1['RtQXI'](sign,I1l1I1[IilIil(0x175,'wny3')]($['id'],'1')),ilI1li={'id':$['id'],'agentNum':'m','taskType':0x1,'followChannelStatus':'',...enc},I1i111=I1l1I1['Jvsjd'],IIliI={'body':JSON[IilIil(0x1ce,'x@Am')](ilI1li)};break;case I1l1I1[IilIil(0x1e5,'seJ8')]:enc=await I1l1I1[IilIil(0x12a,'Ui1g')](sign,$['id']),ilI1li={'id':$['id'],...enc},I1i111=I1l1I1[IilIil(0x13b,'wBkH')],IIliI={'body':JSON['stringify'](ilI1li)};break;default:console[IilIil(0x15d,'AzZi')](IilIil(0x119,'F8nv')+llIliI);return;}const Iillii={};ilI1li&&Object[IilIil(0x130,'seJ8')](ilI1li,Iillii);IIliI&&Object[IilIil(0x1f2,'qr]0')](IIliI,Iillii);const IlI1iI={'url':I1i111,'method':ilI1ll,'headers':{'Host':IilIil(0x180,'8MXC'),'Origin':I1l1I1[IilIil(0x156,'kues')],'Connection':I1l1I1[IilIil(0x172,'uU!y')],'Accept':IilIil(0x155,'wny3'),'User-Agent':$['UA'],'Accept-Language':IilIil(0xf5,'(H@b'),'Referer':I1l1I1[IilIil(0x10a,'qr]0')],'Accept-Encoding':I1l1I1[IilIil(0x134,'1qm2')],'Content-Type':IilIil(0x1b4,'hg(K'),'Cookie':cookie},'params':IIliI,'data':ilI1li,'timeout':0x7530};I1l1I1[IilIil(0x115,'#iCF')](ilI1ll,I1l1I1[IilIil(0x1a5,'At*)')])&&(delete IlI1iI['data'],delete IlI1iI[IilIil(0x173,'TGDo')][I1l1I1[IilIil(0x137,'[O5V')]]);const Iillil=0x1;let l1lIli=0x0,lIIiiI=null,II1lil=![];while(l1lIli<Iillil){I1l1I1[IilIil(0x11a,'dAuw')](l1lIli,0x0)&&await $[IilIil(0x187,'#iCF')](0x3e8);const IllIIl=await common[IilIil(0x166,')pB4')](IlI1iI);if(!IllIIl[IilIil(0xff,'1Jd&')]){lIIiiI=IilIil(0x1f8,'#iCF')+llIliI+IilIil(0x17d,')pB4')+IllIIl[IilIil(0x11d,'wBkH')],l1lIli++;continue;}if(!IllIIl['data']){lIIiiI=IilIil(0x1d2,'#rnC')+llIliI+IilIil(0x186,'wBkH'),l1lIli++;continue;}await taskhandleResponse(llIliI,IllIIl[IilIil(0x1ba,'At*)')]),II1lil=![];break;}I1l1I1[IilIil(0x1d8,'hg(K')](l1lIli,Iillil)&&(console['log'](lIIiiI),II1lil&&($[IilIil(0x116,'5oC(')]=!![],$[IilIil(0x1e3,'sKBc')]&&$['message'][IilIil(0x111,'kues')](lIIiiI)));}async function sign(IiiIi1){const l1iIi=ii1l1,l1ii1={'tnVET':function(lliiil,lliiii){return lliiil||lliiii;}};time=new Date()[l1iIi(0x1f4,'wny3')]();let ii1ll=l1ii1[l1iIi(0x14f,'[O5V')](IiiIi1,'');const IliI1l=time+l1iIi(0x123,'(H@b');return ii1ll=cryptoJS[l1iIi(0x1c6,'uU!y')](ii1ll+IliI1l)[l1iIi(0x164,'sKBc')](),{'t':time,'encStr':ii1ll};}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
